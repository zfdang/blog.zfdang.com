[{"title":"HP Microserver Gen8","date":"2019-12-29T12:04:01.000Z","path":"2019/12/HP-Microserver-Gen8/","text":"HP Gen8服务器买回来之后，一直没怎么折腾。原因有两个，一个是忙，一个是CPU啥的都太贵的。 这次趁周末，所有的CPU啥的都成了白菜价，就折腾了一把： CPU，GEN8的绝配是E3-1265l v2, 当初的售价在1800左右，现在便宜了，淘宝上388入手。之所以说是绝配，一来是因为这块U是低功耗的，45w, 跟原装的G1610T的30W只多了10w,散热应该不用担心。二来性能没有比这块更强的了 内存，闲鱼上买了一条原装的4G的，70块包邮 升级了System ROM， HPIP (HP Intelligent Provisioning), 还有iLO 升级所有的固件，有一个SSP包可以安装，不过支持GEN8的最后的一个SSP包，也是两年前的了 P03093_001_spp-Gen8.1-SPPGen81.4.iso （可以在 https://www.chiphell.com/thread-1796234-1-1.html 下载） GEN8最大的坑，就是噪音问题。很多人已经总结的很好了，就是GEN8内置的raid卡，如果打开了，并且把硬盘设置成了raid0, 那么很多系统是没法读取硬盘的smart信息的，硬盘也没法休眠，一直处于raid卡的唤醒中。但是如果把raid卡禁用了，支持采用ACHI模式，风扇的转速又居高不下，噪音太大。 我曾经把iLO升级到了最新版本2.72, 然后把system rom升级到2019.04.04， 然后硬盘采用ACHI模式。发现风扇的转速在15%左右。 想追求更低的噪音，就刷了破解版的1.32的iLO，发现风扇的转速只有8%， 比15%安静了不少。问题也很突出，iLO只有1.3.2版的，2.7.2支持了HTML5的remote console。好在ilo也不太常用，还是安静一点更重要，就坚持使用这个1.32的ilo了 见图： 附破解版1.32 ilo： iLO-1.32-cracked","tags":[]},{"title":"香港，窗口和蜜罐的宿命","date":"2019-07-25T00:43:20.000Z","path":"2019/07/hong-kong-window-and-honeypot/","text":"一直以來，香港的定位就非常明確，這個地方就是一個試驗區。試驗什麼？試驗哪一種社會制度能夠讓中國人活得更好。但既然是實驗，那就會有兩種結果，一種好，一種壞，在結果出來之前，沒有人知道是好還是壞。 转载自公众号： NE0 （原文已被删除） 原文：香港，窗口和蜜罐的宿命.pdf 很多朋友在後台點名要談香港，姑且就說說我自己的看法吧。要解開香港的死結，有三個問題是需要回答的： 第一個，是香港這個城市的定位，即它對中國大陸來說最終會扮演一個什麼樣的角色； 第二個，是中國執政黨的治國理政思路，尤其是鄧小平本人對於香港的看法； 第三個，是在大的歷史趨勢中，我們究竟需要香港這個城市來達成我們對外和對內的一個什麼目的； 在談這些問題之前，有一個可以明確的地方是，我們既然是可以談香港問題，甚至大部分人在主流媒體上看到香港暴徒的各種行為，肯定是得到了許可。（也就是很多人擔心的失控，是多餘的） 沒有在宣傳系統待過的人對這些肯定無感，但任何在宣傳系統待過的人應該都知道，涉及到港澳台和國外的新聞，都屬於高度敏感的話題，大到新聞報導的方向，小到相關特定名詞的引用，都會被篩選過。 也就是說，能被你看到，肯定是國家想讓你看到。（那你就該想想，國家讓你看到這些，是為什麼？） 大約是9年還是10年前的7月份，那時我還在香港對岸，2009，2010年左右，正是公知推牆黨們最猖獗的那段時間，7月1號，香港那邊又開始衝擊西環，上街，縱火，燒旗，比今天的潑黑水有過之而無不及，但哪怕是一水之隔，大陸這邊根本不會有任何大規模的消息，也就是說，得益於方濱興校長的努力，其實只要這些信息，想隔絕是完全可以隔絕的。 然而這次沒有，這次，放開讓大家看這群暴徒。 所以，為什麼？ 這就要從上面的第一個問題，香港自身的定位開始。 一直以來，香港的定位就非常明確，這個地方就是一個試驗區。 試驗什麼？試驗哪一種社會制度能夠讓中國人活得更好。但既然是實驗，那就會有兩種結果，一種好，一種壞，在結果出來之前，沒有人知道是好還是壞。 我們站在今天，去比較中國大陸和香港這些年的發展，自然能得出中國大陸制度的優越性，但放你去四十年前，你有能力看到當下的這些局面嗎？別說四十年前，十年前的天涯之類的論壇，很多熱帖還在討論中國經濟能否在2030年超越日本，說能的人幾乎都被要嘲笑一番過於激進，然而十年後，若按購買力平價指數計算，我們的經濟規模其實已經超越了太平洋對岸那個敵國。 不管今天在中國大陸的那些有不滿的人是如何不滿，至少你們是站在全世界經濟總體實力第二強的國家的國土上吐槽，而不是像川普口中那些shit hole國家的人一樣在飢寒交迫中連抱怨的力氣都沒有。 我個人覺得，會有香港這個「試驗」，是中國執政者的典型政治智慧和執政手法的一個延續。按照我自己的理解，毛澤東給這個國家以及往後的執政團隊留下的最深刻的痕跡就是四個字：實事求是。不管是何種社會制度，它最終是要拿來被人用的，一切問題的核心，在於人。 也就是說，只要能讓人民過上更好的生活，能讓這個國家的國力更加強盛，其它的東西，都只是手段，而不是目的，能為我所用的，就是好的，不能達到我們目標的，吹得再天花亂墜，都是廢話。 經濟領域的分配製度，不管是「資」，還是「社」，它們都最終要歸於毛澤東在創立這個國家時立下的最終的目的：「為人民服務。」 我們跟蘇聯走上了兩個完全不同的結局，正是因為我們的執政團隊有一個最終的目的，也可以說最初的初心，而不是僵化地陷於二元意識形態之爭。 你們有沒有想過，當年的鄧小平在制定一國兩制這個試驗的時候，是不是必須要考慮一個問題，那就是：萬一，我說的是萬一，站在當時來看，50年後，如果香港各個方面都優越於中國大陸，那麼到時候會怎麼辦？ 很幸運的是我們現在永遠不會擔心這個問題了。但這個我們永遠不用再擔心的問題正是香港這個地方存在的意義。 在我們不夠好的時候它可以給我們展示一個運作良好的社會是怎麼樣運作的，在我們比它好的時候，它能給我們提供一個社會樣本的崩潰和衰落，是如何進行的。 當年的深圳，說難聽點的話，只是圍繞這個試驗而設置的一個緩衝區。香港一個點，深圳一個緩衝區，然後是廣東一個更大的緩衝區，再後面才是廣大的內陸腹地。 不管是香港還是深圳出了問題，都可以在小範圍內隔離開來，不至於對廣大的內陸腹地造成更大範圍的影響，我覺得這是一個負責任的執政者應該有的態度。 在看待香港出現的所有問題的時候，要時刻記住：這是一個用於試驗的地方。基於這個定位，你們的很多困惑是可以迎刃而解的。 要解決香港現在的很多的問題，其實當年直接一國一制就好了，為什麼不呢？因為： 一個二線城市易得，而能拿一整座城市七百萬人來做試驗的機會難找。 今天你們擔心什麼香港要亂，解放軍再不動作就如何如何，其實是多餘的，別忘了，香港跟深圳只隔了一條淺淺的河，別說是香港，哪怕是美國，如果它跟中國之間只隔了一條河，那它也得十條航母砍掉九條把錢拿來造坦克。 如果把中國這個國家比作一個完整的人體，那麼香港就好比是一個在逐步病變的部位，但是幸運的是，雖然這個部位屬於人體，但它又不是嚴格意義上的連在一起，我們完全可以在一個安全的距離來觀察這塊病變的肌體。 從中醫的角度來看，身體時不時感個冒，發個燒，其實不是什麼壞事，因為這是身體在提醒你，可能最近過度操勞了，休息不夠了，抵抗力弱了，是一個讓我們可以反思自身，給自身一個調養時間的機會。 很多人往往平時透支得很厲害，但身體也一直沒事，但一有事，那往往就是大病，這實際上就是在過度透支自己的身體的時候，大腦選擇了主動屏蔽身體發出的需要休養的信號，強行透支，導致平時看起來沒什麼問題，裡面的病灶已經在瘋狂積累，一到臨界點，撐不住就是大病一場。 治理國家，其實是一樣的道理。 中國數千年曆史，多少盛世，其實在一片歌舞昇平下已經暗暗埋下了各種病變，如今我們有一個可以隔離開來的病變部位，實際上可以不斷地刺激我們肌體裡產生源源不斷的免疫細胞，不好嗎？ 如果從本文開頭的第三個問題來看，香港在對內和對外，實際上有兩個作用。 對內，它在現在和未來，都是一個窗口，用於展示所謂的實行資本主義制度和西方三權分立及海洋法系法律制度的地方，會出現多麼可怕的貧富分化和社會動盪，而這在外國勢力的干涉下，又會演變成多麼混亂的局面。 這可以時刻抽打著那些希望在中國實行資本主義和西方政治制度的壞人，同時讓普通的中國民眾去認識到我們自身的製度的優越性。 三個自信是怎麼出來，不是說出來的，而是做出來的，比出來的。 此外，官方渠道大張旗鼓地報導香港那些暴徒的惡劣行徑，實際上是為另外一個方向的引導做鋪墊：台灣。 宣傳機器全力開動的理由只有一個：爭取民心，佔領道德制高點。 我一再提醒，台灣問題不會一拖再拖。 在解決台灣問題之前，我們有必要提前讓大多數國民凝結到一起，把那些分裂分子以及他們背後的英美勢力醜惡的一面展示給大多數國民。 大多數人看到的是香港，而我看到的滿滿都是兩個字：台灣。 一國兩制的試驗實際上已經結束了，未來的二十年不可能出現任何不一樣的結果，所以，香港的動亂，實際上會為台灣的一國一制鋪上正軌。 香港的這些動亂分子鬧得越兇，實際上越在輿論和宣傳上為我們提供了更多的彈藥，那些頭腦發熱的年輕人根本沒有任何政治頭腦，他們只是一群供人任意操縱的棋子，等待他們的，只有被人賣了還得替人數錢的下場。 而對外，香港則是一個我們設置給外部敵意世界的一個「蜜罐」，也就是駭客攻防中常說的一個術語「Honey Pot」。 對於電腦世界來說，蜜罐的定義是：「蜜罐是一個安全資源，它的價值在於被探測、攻擊和損害。」蜜罐技術本質上是一種對攻擊方進行欺騙的技術，通過佈置一些作為誘餌的主機、網路服務或者信息，誘使攻擊方對它們實施攻擊，從而可以對攻擊行為進行捕獲和分析，了解攻擊方所使用的工具與方法，推測攻擊意圖和動機，能夠讓防禦方清晰地了解他們所面對的安全威脅，並通過技術和管理手段來增強實際系統的安全防護能力。 蜜罐故意設置成容易讓人攻擊的目標，引誘駭客前來攻擊。一旦攻擊者入侵後，我們就可以知道他是如何得逞的，透過蜜罐還可以通過竊聽駭客之間的聯繫，收集駭客所用的種種工具，並且掌握他們的連接節點。 一台合格的蜜罐擁有：發現攻擊、產生警告、強大的記錄能力、欺騙、協助調查等功能。 蜜罐機看似漏洞百出卻盡在掌握之中，一個合格的蜜罐收集的入侵數據是十分有價值的。 以上的電腦術語，如果我們把它通過詞語的置換替換成政治性話語，那就是通過佈置香港這麼一個作為誘餌的城市，誘使歐美對我們懷有極大敵意的外部勢力來對它實施攻擊，在這個攻擊過程中，我們來觀察和對他們的攻擊行為進行捕獲和分析，了解歐美敵對勢力所使用的工具與方法，他們是怎麼煽動，又是怎麼控制輿論的，他們是從什麼渠道滲透，又是透過什麼方式進行溝通的，他們下一步的攻擊手法和時機會是什麼…… 一個香港，實際上能夠讓我們清晰地了解我們未來可能面對的安全威脅，了解我們的敵人都有哪些手段，是怎麼培養代理人，是怎麼樣組織那些動亂分子的，我們可以如何通過技術和管理手段來增強實際我們自身的安全防護能力，以及如何有效反擊回去。 我還是那句話，一個二線城市易得，而一座能夠拿來當蜜罐的城市難找。 你們真覺得沒法收拾那幾十個小魚小蝦？香港自50年代起就作為一個東亞情報角力中心，在回歸之前我們就已經耕耘了幾十年，即使在英國人統治時期我們的情報工作也從未落下風，更何況回歸之後。 不收拾他們，自然有沒到時候的理由。 如果我們真要連根拔除，其實前幾天就有一個最好的機會。 7月20日，香港警方在荃灣一座工廠大廈單位內發現包括至少1公斤TATP烈性炸藥及10枚燃燒彈在內的爆炸品。 這條新聞不熱，甚至已經被其它新聞迅速掩蓋過去了，但在我看來，這卻是一條非常非常重要的線索。 1公斤烈性炸藥，是什麼概念？ 一顆67式的裝藥大概是38克TNT，殺傷範圍是10米。TATPT的威力大概是TNT的80%，也就是說50克的TATP大概就相當於一顆67式。一公斤，差不多是20顆進攻手榴彈的威力。一旦用於人口密集的區域，殺傷力絕對不可小看。 但立馬抓捕是不是最好的選擇？在我看來未必是。 如果是我，其實很可能不會選擇在其沒有製造完成的時候進行抓捕。 在珍珠港事件發生之前，其實美國軍方早已經破解了日本人的秘密，羅斯福早就知道珍珠港會遇襲，那為什麼一定要讓珍珠港遇襲？那是因為珍珠港那些人命，能換來他想要的結果。 政治很多時候就是那麼冷冰冰。 比起TATP更重要的，其實是那些TATP，會被用到哪裡。 查獲的地方在荃灣，而如果我是那些恐怖分子，必然會選擇兩種地方下手，一種是有重要政治性意義的目標，西環，另外一種是可以大規模殺傷特定人群，例如有大量大陸游客的 地方。 能查獲TATP，說明我們能夠掌握那些恐怖分子內部（懂我意思吧）的情況，既然我們能夠掌握TATP的相關情報，那麼我們就應該等他們在準備襲擊之前再將其攔截，坐實他恐怖分子的罪名，而不是什麼非法持有爆炸物。 而沒有像我說的這樣，說明現在還沒有到收網的時候。真要一網打盡，完全可以等爆了，軍隊立馬接管。所以在此時選擇大事化小，顯然我們還有時間，給那些跳梁小丑繼續出醜，然後再收緊絞索。 跳梁小丑們，根本不知道，現在能夠讓他們跳，是因為前面已經給他們鋪好了一條死路。 而香港，這座我曾經工作和生活過一段不短時間的城市，雖然我對它還是有很多複雜的感情，也希望它能好，但它要迎來新生，恐怕要等到新一批能夠正確認識和擺正香港跟大陸關係的年輕人走到前台，實現跟大陸真正的融合，才是它擺脫作為一個失敗的試驗品的一天了。","tags":[]},{"title":"破解北京联通的光猫TEWA-800E","date":"2019-03-02T08:59:16.000Z","path":"2019/03/crack-unicom-fiber-modem-TEWA-800E/","text":"最近更换了联通的光猫，型号是TEWA-800E, 结果发现联通小哥给装好以后，PPPoE的连接直接在光猫上进行了，自己的路由器只能拿到内部192.168.1.x的内部IP。这个没法接受啊 以路由器上标注的账号登录，只能是普通用户模式，很多设置的选项都不存在。搜了一下，发现现在已经有办法可以以CUAdmin/CUAdmin模式登录了。破解主要集中在两点： 页面不显示用户名, 只有输入密码的地方，因为“user_name”这个field已经被固定设置为”user”. 第一步就是要把这个field value给改成CUAdmin了 （F12找到”user_name”，将value修改为CUAdmin） 页面有javascript, 当提交登录时，如果用户名不是user, 就提示错误并且禁止提交 （F12在Sources中找到一段限制非user用户不能登录的function定义，拷贝到Console中，删掉有关用户名限制的if判断，重新定义这个function） 上面这两个都可以通过dev tools直接修改。具体可以参考： https://guanggai.org/thread-563-1-1.html 以管理员登录后，改变Internet的设置，改成桥接模式就可以了。注意光猫里面的设置会有很多不同的连接，需要首先在“连接名称”里，选择了”2_INTERNET_xxx”这个选项，然后再改设置。如下图： DHCP也可以关闭 然后重启，就可以在自己的路由器上进行PPPoE拨号了","tags":[]},{"title":"保持谦逊","date":"2019-03-02T08:49:51.000Z","path":"2019/03/stay-humble/","text":"当面对一个新的团队时，一件重要的事情，是保持谦逊，因为你不清楚到底有多少坑…","tags":[]},{"title":"闲话架构","date":"2019-01-09T07:14:05.000Z","path":"2019/01/notes-about-architecture/","text":"到底什么是架构？软件架构到底是为了什么，要做什么？ 架构为了业务抛开业务谈架构，是没有价值的，架构不能离开业务单独存在。 因为业务的不同，架构也是多种多样。 架构的最终目标，是为了支撑业务，不能满足业务发展的架构，不是一个好架构 架构为了协作架构的目的，是为了使得团队规模变大时成员间的协作也能够顺利进行。如果一个团队，就那么几个人，那么讨论不同架构的价值意义很小。这时候，可能一个单体应用，是最适合的方法。 当团队规模变大时，我们需要在架构上将不同成员的工作解耦，使得每个人可以相对独立的完成自己的工作，而不用相互之间有很强的依赖性。 所以架构的要求，要能做到解耦，从而使得协作变得容易。 架构需要不断演化公司的业务和团队的规模总是在不断的变化。这种变化，使得架构要解决的问题也总是不一样的，所以架构要不断的演化。 不存在这么一个理想的架构，它在公司不同的发展阶段都是最好的。 架构要演化，就需要投入。 好的架构要能做到未雨绸缪，提前做好变化，从而能迎接团队、业务的变化。","tags":[]},{"title":"使用Fresco库时，显示超大图片时效果差的解决方法","date":"2018-12-11T09:37:34.000Z","path":"2018/12/fix-low-rendering-quality-issue-for-large-image-while-using-fresco/","text":"使用Fresco来处理和显示图片很方便。可是最近遇到一个问题，Fresco显示大图片时，效果特别差，模糊感特别强烈。 后来终于找到了解决办法： https://github.com/facebook/fresco/issues/916 Fresco’s max supported width/height in resizingIf you ResizeOptions, the converted one has a max size of 2048px, which makes wide or long image’s quality low. If you can cut the source into smaller one, its quality will be better. 后来Fresco改进了ResizeOptions了，可以设置maxBitmapSize了。 https://frescolib.org/javadoc/reference/com/facebook/imagepipeline/common/ResizeOptions.html 如果不担心收到的图片过于大的话，下面这个方法就很简单粗暴了： ImageRequestBuilder.newBuilderWithSource(Uri.parse(uri)).setResizeOptions(new ResizeOptions(Integer.MAX_VALUE, Integer.MAX_VALUE, Integer.MAX_VALUE))` 注意: 如果开启了硬件加速，android的OpenGL对图片的最大尺寸有要求。如果超过这个最大的size，图片直接显示空白，程序也不会报错。 参见： https://stackoverflow.com/questions/15313807/android-maximum-allowed-width-height-of-bitmap https://stackoverflow.com/questions/7428996/hw-accelerated-activity-how-to-get-opengl-texture-size-limit 解决方法就是把图片动态切成多个小图，显示成多个图片，然后拼接在一起。 这里有一个例子： https://github.com/zfdang/zSMTH-Android/blob/master/app/src/main/java/com/zfdang/zsmth_android/fresco/WrapContentDraweeView.java","tags":[]},{"title":"monorepo的讨论","date":"2018-10-24T07:42:23.000Z","path":"2018/10/monolithic-repository/","text":"所谓“天下大事，分久必合合久必分”，如今在代码库的管理上，也出现了这种争论：到底是使用多个代码库呢，还是使用单个的代码库？ multiple repositories v.s. monolithic repository monorepo的代表，有Google, Facebook等一众高大上的公司。 这里有几篇文章，供大家借鉴： Advantages of monorepos Why We Should Use Monolithic Repositories Why We Should Not Return to Monolithic Repositories 大家的意见呢？","tags":[]},{"title":"从百度云盘快速下载文件","date":"2018-10-16T08:50:58.000Z","path":"2018/10/download-from-baidu-pan/","text":"百度云盘在经历过免费期后，现在对非付费用户的下载限速非常狠，经常只有10k左右，还经常下载失败。 码农肯定不会付钱买服务的，呵呵，所以就有快速下载百度云盘的方法出来了： 先安装Aria2 Gui for Machttps://github.com/yangshun1029/aria2gui 再在Chrome里安装百度Exporterhttps://github.com/acgotaku/BaiduExporter 下载的时候，先创建公开的分享，然后在分享的页面，就会出现导出到Aria2的按钮了 回到Aria2就可以看到下载的状态了:","tags":[]},{"title":"黄花城水长城","date":"2018-10-08T05:24:01.000Z","path":"2018/10/great-wall-in-water/","text":"从长城俯瞰水库","tags":[]},{"title":"MacOS下Cisco AnyConnect频繁要求管理员权限的解决方法","date":"2018-09-23T06:50:35.000Z","path":"2018/09/anyconnect-ask-for-permission-in-macos/","text":"MacOS下，Cisco AnyConnect客户端，经常要求输入管理员密码，并且没办法记住用户名或者密码，特别讨厌。 Mac OS wants to make changes. Type an administrator’s name and password to allow this: 后来终于找到了解决的方法： https://discussions.apple.com/thread/6995022 • Launch /Applications/Utilities/Keychain Access • Select “System” from the Keychains menu in the upper left • Select “Certificates” from the Category menu in the lower left • Find the entry that corelates to your computer’s name in the list on the right, and click on the disclosure triangle. • Secondary click on the “Private Key” entry that appears and select “Get Info” from the contextual menu that appears. • Select the Access Control tab. • You can then either add AnyConnect to the the list at the bottom of the screen (more secure, but you will need to repeat this process anytime the version of AnyConnect changes), or toggle the radio button to “Allow all applications to access this item”. 如下图： 完美解决！","tags":[]},{"title":"使用Github和Hexo来建立个人Blog","date":"2018-09-23T06:22:23.000Z","path":"2018/09/Blog-based-on-Github-and-Hexo/","text":"之前的Blog服务器被干掉了，结果数据还没有备份，有点坑爹了~~~ 重新开始! 现在github的repo, 支持使用repo中的/docs/目录作为项目主页，用Hexo来建立blog就非常方便了，如果想偷懒的话根本不需要deploy的步骤了。 修改hexo的输出目录修改_config.yml中的输出目录: public_dir: docs 然后 “/docs/“下面增加CNAME文件，指定blog的地址， 如 “blog.zfdang.com” $ hexo g 把repo push到github上 修改github repo的设置 收工！","tags":[]},{"title":"Hello World","date":"2018-09-22T06:00:00.000Z","path":"2018/09/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[]},{"title":"android处理图片的一些问题总结","date":"2013-03-12T01:20:41.000Z","path":"2013/03/summary-of-image-processing-in-android/","text":"第一个问题是out of memory java.lang.OutOfMemoryError: bitmap size exceeds VM budget 这个据说是VM对一个程序申请的所有的bitmap对象会有一个最大值的要求。解决这个问题有几个方法： 从源文件生成图片时，直接将图片缩小，而不是加载原始大小的图片。如下代码： BitmapFactory.Options o = null; Bitmap bitmap = null; // decode image size (decode metadata only, not the whole image) o = new BitmapFactory.Options(); o.inJustDecodeBounds = true; stream = new FileInputStream(filename); BitmapFactory.decodeStream(stream, null, o); stream.close(); // get original image size int inWidth = o.outWidth; int inHeight = o.outHeight; clog(String.format(&quot;Original bitmap size: (%dx%d).&quot;, inWidth, inHeight)); // get size for pre-resized image o = new BitmapFactory.Options(); o.inSampleSize = Math.max(inWidth/targetWidth, inHeight/targetHeight); // decode pre-resized image stream = new FileInputStream(filename); // o.inPurgeable = true; bitmap = BitmapFactory.decodeStream(stream, null, o); stream.close(); clog(String.format(&quot;Resized bitmap size: (%dx%d).&quot;, bitmap.getWidth(), bitmap.getHeight())); 这里有一个真实的例子： https://github.com/zfdang/asm-android-client-for-newsmth/blob/master/src/com/koushikdutta/urlimageviewhelper/UrlImageViewHelper.java 及时删除不需要使用的bitmap对象，不要将所有的对象都cache住 增加程序的heap size。从某个版本开始，android manifest文件里有一个新的属性了： android:largeHeap=&quot;true&quot; android:largeHeap Whether your application’s processes should be created with a large Dalvik heap. This applies to all processes created for the application. It only applies to the first application loaded into a process; if you’re using a shared user ID to allow multiple applications to use a process, they all must use this option consistently or they will have unpredictable results.Most apps should not need this and should instead focus on reducing their overall memory usage for improved performance. Enabling this also does not guarantee a fixed increase in available memory, because some devices are constrained by their total available memory.To query the available memory size at runtime, use the methods getMemoryClass() or getLargeMemoryClass(). 第二个问题是 Bitmap too large to be uploaded into a texture exception 这个问题下面链接有详细描述： http://stackoverflow.com/questions/7428996/hw-accelerated-activity-how-to-get-opengl-texture-size-limit 简单说就是硬件加速的时候，对图片的大小有限制。不同设备可能有不同的最大值。这个问题悲催的地方是，程序貌似没有捕获到这个exception, 结果是程序也不报错，图片也显示不出来。只有看debug log才能发现这个error message. 一个解决的方法是禁止硬件加速，简单粗暴： android:hardwareAccelerated=&quot;false&quot; android:hardwareAcceleratedWhether or not hardware-accelerated rendering should be enabled for all activities and views in this application — “true” if it should be enabled, and “false” if not. The default value is “true” if you’ve set either minSdkVersion or targetSdkVersion to “14” or higher; otherwise, it’s “false”.Starting from Android 3.0 (API level 11), a hardware-accelerated OpenGL renderer is available to applications, to improve performance for many common 2D graphics operations. When the hardware-accelerated renderer is enabled, most operations in Canvas, Paint, Xfermode, ColorFilter, Shader, and Camera are accelerated. This results in smoother animations, smoother scrolling, and improved responsiveness overall, even for applications that do not explicitly make use the framework’s OpenGL libraries.Note that not all of the OpenGL 2D operations are accelerated. If you enable the hardware-accelerated renderer, test your application to ensure that it can make use of the renderer without errors.For more information, read the Hardware Acceleration guide. 比较好的解决方法是类似google map的实现：将图片分成不同的小块，每次只加载需要的块。android提供了一个方法： http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html public void drawBitmap (Bitmap bitmap, Rect src, RectF dst, Paint paint) public Bitmap decodeRegion (Rect rect, BitmapFactory.Options options) 采取上述操作后，就可以加载很多图片，同时也可以显示超级大图了。 也有一个例子，是使用Fresco这个库来显示超长图片的： https://github.com/zfdang/zSMTH-Android/blob/master/app/src/main/java/com/zfdang/zsmth_android/fresco/WrapContentDraweeView.java 上面的例子里，图片如果过宽，先会被缩放到合适的宽度；然后根据高度和openGL支持的最大高度，把图片裁剪成多个符合要求的图，然后拼接在一起。","tags":[]}]